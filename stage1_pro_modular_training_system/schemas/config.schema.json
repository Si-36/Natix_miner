{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Stage1ProConfig Schema",
  "type": "object",
  "properties": {
    "model_path": {"type": "string"},
    "train_image_dir": {"type": "string"},
    "train_labels_file": {"type": "string"},
    "val_image_dir": {"type": "string"},
    "val_labels_file": {"type": "string"},
    "mode": {"type": "string", "enum": ["extract_features", "train_cached", "train"]},
    "cached_features_dir": {"type": "string"},
    "use_extra_roadwork": {"type": "boolean"},
    "roadwork_iccv_dir": {"type": "string"},
    "roadwork_extra_dir": {"type": "string"},
    "max_batch_size": {"type": "integer"},
    "fallback_batch_size": {"type": "integer"},
    "grad_accum_steps": {"type": "integer"},
    "epochs": {"type": "integer"},
    "warmup_epochs": {"type": "integer"},
    "lr_head": {"type": "number"},
    "lr_backbone": {"type": "number"},
    "weight_decay": {"type": "number"},
    "label_smoothing": {"type": "number"},
    "max_grad_norm": {"type": "number"},
    "dropout": {"type": "number"},
    "use_amp": {"type": "boolean"},
    "use_ema": {"type": "boolean"},
    "ema_decay": {"type": "number"},
    "early_stop_patience": {"type": "integer"},
    "legacy_exit_threshold_for_logging": {"type": "number"},
    "resume_checkpoint": {"type": ["string", "null"]},
    "log_file": {"type": "string"},
    "output_dir": {"type": "string"},
    "val_select_ratio": {"type": "number"},
    "val_calib_ratio": {"type": "number"},
    "val_test_ratio": {"type": "number"},
    "target_fnr_exit": {"type": "number"},
    "exit_policy": {"type": "string", "enum": ["softmax", "gate", "scrc"]},
    "bootstrap_samples": {"type": "integer"},
    "bootstrap_confidence": {"type": "number"},
    "seed": {"type": ["integer", "null"]},
    "timestamp": {"type": ["string", "null"]},
    "git_commit": {"type": ["string", "null"]}
  },
  "required": [
    "model_path", "train_image_dir", "train_labels_file", "val_image_dir", "val_labels_file",
    "mode", "target_fnr_exit", "exit_policy"
  ]
}
