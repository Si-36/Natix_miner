{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Thresholds Schema (Phase 1)",
  "description": "Phase 1 policy artifact containing softmax threshold for exit decision",
  "type": "object",
  "required": ["exit_threshold", "fnr_on_exits", "coverage", "exit_accuracy"],
  "properties": {
    "exit_threshold": {
      "type": "number",
      "minimum": 0.0,
      "maximum": 1.0,
      "description": "Softmax threshold for exit decision (p >= threshold -> exit to Stage-2)"
    },
    "fnr_on_exits": {
      "type": "number",
      "minimum": 0.0,
      "maximum": 1.0,
      "description": "False negative rate on exited samples"
    },
    "coverage": {
      "type": "number",
      "minimum": 0.0,
      "maximum": 1.0,
      "description": "Fraction of samples that exit (are classified by Stage-1)"
    },
    "exit_accuracy": {
      "type": "number",
      "minimum": 0.0,
      "maximum": 1.0,
      "description": "Classification accuracy on exited samples"
    },
    "sweep_results": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "threshold": {"type": "number"},
          "coverage": {"type": "number"},
          "exit_accuracy": {"type": "number"},
          "fnr_on_exits": {"type": "number"}
        }
      },
      "description": "Full sweep results for analysis"
    },
    "target_fnr": {
      "type": "number",
      "description": "Target false negative rate constraint"
    }
  }
}
